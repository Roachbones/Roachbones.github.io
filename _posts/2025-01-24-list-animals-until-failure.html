---
layout: vivpost
title: "list animals until failure"
subtitle: "About my little web game, <i>List Animals Until Failure</i>"
---

<style>
a[href^="https://www.wikidata.org/"] {
    display: inline-block;
    &::before {
        content: url("/post_assets/Wikidata_favicon.png");
    }
}
a[href^="https://en.wikipedia.org/"] {
    display: inline-block;
    &::before {
        content: url("/post_assets/Wikipedia_favicon.png");
    }
}
a::before {
    vertical-align: middle;
    margin-right: 2pt;
}
#ğŸ³, samp { background-color: var(--color-bg-secondary); }
#ğŸ³ {
    font-family: serif;
    padding: 1em;
    max-width: max-content;
    border-style: inset;
}
#ğŸ³[open] div { /* could use ::details-content but using div for compatibility */
    display: flex; flex-wrap: wrap; justify-content: center; column-gap: 1em;
    & section { flex: 1; min-width: 50% }
    & img { flex: 1; min-width: 18em; max-width: 35em; align-self: center;}
}
@media (prefers-color-scheme: dark) {
    #tree {
        filter: invert(1);
    }
    #stamp {
        mix-blend-mode: screen;
    }
    #cloudy > * {
        background-color: color-mix(var(--color-bg-secondary) 50%, transparent 50%);
    }
}
#devinscript {
    margin: 2em;
    & p {
        padding: .5em;
        padding-left: 1em; padding-right: 1em;
        margin-left: 4em;
        background-color: light-dark(lightblue, teal);
        border-radius: 1em;
        @media (prefers-contrast: more) { border-style: solid; border-width: 1px; }
        max-width: max-content;
        position: relative;
        font-size: large;
        &::before {
            content: "";
            background-image:  url("/post_assets/devin.webp");
            display: inline-block;
            width: 2em; height: 2em;
            background-size: contain;
            border-radius: 3em;
            position: absolute; left: -2.5em;
        }
    }
}
.bgdemo { padding: 4em; }

</style>

<p>I made a web game, <a href=/animalist>List Animals Until Failure</a>. You just name as many animals as you can. Play it and show me how far you get.

<details><summary>Inspired by a meme</summary>
<p style=text-align:center><img src=/post_assets/brain_workout.jpg alt="">
</details>

<p>Each animal grants a point. You can be vague, but you donâ€™t get extra points for nesting categories. E.g. you only get one point for listing â€œmammalâ€ & â€œprimateâ€ & â€œhumanâ€, since those arenâ€™t different animals.


<h2 id=how-it-works>How it works</h2>

<p style=text-align:center;min-height:19em><img id=stamp alt="Powered by Wikidata" src=/post_assets/Wikidata_stamp.svg style=width:20em></p>

<p>I used Wikidata and Wikipedia. Read on for technical details.

<h2 id=datamining>Datamining</h2>

<p>This was the sort of datamining project that goes like this:
<ul>
    <li>I can parse [all these entities] and that will be a good start.
    <li>That got me 90% of the way there, but thereâ€™s this other case I need to handle.
    <li>Now Iâ€™m 95% of the way there, but thereâ€™s another edge case.
    <li>Now Iâ€™m 98% of the way there, maybe if I parse this other thing tooâ€¦?
</ul>


<h3 id=general-strategy>General strategy</h3>

<p>Mine Wikidata entities representing taxons. Use those to build a <dfn>phylogenic</dfn> (evolutionary) tree. Get the taxonsâ€™ names from Wikipedia (since Wikidata entities link to Wikipedia pages, and Wikipedia has good judgement about what things should be called, and has good redirects). If an entity lacks a Wikipedia article, itâ€™s probably not worth including â€” or if it is, the player should write a Wikipedia article for it! Also get names from the Wikidata entity itself since I later realized this would cover some missing cases; e.g. <a href=https://en.wikipedia.org/wiki/Person>Person</a> is its own Wikipedia article, but Wikidata lists it as a name for <a href=https://www.wikidata.org/wiki/Q5>Human</a>.

<h3 id=combining-sources>Combining sources</h3>
<p>The Wikidata entity doesnâ€™t always have both taxon data <em>and</em> name data. For example, <a href=https://www.wikidata.org/wiki/Q146>Cat</a> represents the common name (and lacks taxon data), while <a href=https://www.wikidata.org/wiki/Q20980826>Felis catus</a> represents the species (and has poor name data).

<p>How to reconcile this? The <code>taxon known by this common name</code> property links the two entities, so I use that. Get names from the common name entity and its Wikipedia page; get taxonomy from the species entity. I want to use common names as much as possible ingame; the phylogenic tree is just a means to construct a hierarchy of terminology.


<h3 id=more-cases>More cases</h3>
<ul>
  <li>Handle disambiguation pages: if an animal (as identified by previous steps) is the first (fully-nested wikilink in a wikilist) in a termâ€™s disambiguation page, then recognize that term as the animal. Example: <a href=https://en.wikipedia.org/wiki/Blood_worm>Blood worm</a>.
  <li>Same with <a href=https://en.wikipedia.org/wiki/Category:Set_index_articles_on_animal_common_names>Category:Set index articles on animal common names</a>. Example: <a href=https://en.wikipedia.org/wiki/Pumpkin_spider>Pumpkin spider</a>.
  <li>Same with <a href=https://en.wikipedia.org/wiki/Category:Set_index_articles_on_snakes>Category:Set index articles on snakes</a> since those arenâ€™t marked with the previous category for some reason. Example: <a href=https://en.wikipedia.org/wiki/Diamondback_rattlesnake>Diamondback rattlesnake</a>.
  <li>If thereâ€™s an animal called â€œcommon <b>X</b>â€, then use it as a fallback for â€œ<b>X</b>â€. Example: guessing â€œ<a href=https://en.wikipedia.org/wiki/CoquÃ­>CoquÃ­</a>â€ is equivalent to guessing â€œ<a href=https://en.wikipedia.org/wiki/Common_coquÃ­>Common coquÃ­</a>â€.
</ul>


<h3 id=paraphyly>Paraphyly</h3>

<p>Ducks, egrets, gnats, buzzards, hawks, mites: none of these are defined solely by a phylogenic taxon; theyâ€™re what you might call â€œform taxaâ€. In other words: iff it looks like a duck and quacks like a duck, itâ€™s a duck.

<p>Sometimes the game uses the closest common ancestor of the group. So a player who lists â€œmiteâ€ only gets a point for â€œarachnidâ€ and canâ€™t score separately for â€œspiderâ€. This is a bummer since tarantulas definitely arenâ€™t mites, but itâ€™s otherwise hard to define â€œmiteâ€ in a strict hierarchy.

<!--<p>(We can find the closest common ancestor from the <code>parent</code> (or <code>taxon</code>) attribute of the <code>{{ '{{' }}Paraphyletic group}}</code> infobox.)-->

<p>In other cases, there are better solutions. For example, <a href=https://en.wikipedia.org/wiki/Trout>Trout</a> doesnâ€™t even have a paraphyletic group infobox, maybe because itâ€™s so colloquial a term, and even if it did, many barely-related fish are called trout. So I manually add a redirect to a single representative for the group: â€œtroutâ€ becomes â€œbrown troutâ€.

<p>More extreme example: If you know of <a href=https://en.wikipedia.org/wiki/Carcinisation>Carcinization</a>, you can imagine the difficulty of defining crabs. So â€œcrabâ€ becomes â€œbrown crabâ€.

<h3 id=away-from-phylogeny>Away from phylogeny</h3>

<p>A wasp is any Apocritan that isnâ€™t a bee or an ant.

<figure style=max-width:30em;margin:auto;padding:1em;min-height:30em>
<img alt="Taxonomic tree showing that ants and bees descend from wasps but aren't considered wasps" src=/post_assets/Wasps_are_Paraphyletic.svg id=tree>
<figcaption style=font-size:small;text-align:center><a href="https://commons.wikimedia.org/wiki/File:Wasps_are_Paraphyletic.svg">(diagram by several Wikimedia Commons contributors)</a></figcaption>
</figure>

<p>Everything in Apocrita is a wasp, <em>except</em> bees and ants.

<p>If youâ€™re an entomologist, or an evolutionary biologist, you might say â€œwell, bees and ants are just wasps, reallyâ€, and I respect that. But colloquially, bees and ants arenâ€™t wasps. If this game insists on a purely phylogenic approach, then itâ€™s like, come on, I canâ€™t get a point for saying wasp <i>and</i> ant? Thatâ€™s unreasonable. If I ask a 2-year-old to list animals and she lists wasp <i>and</i> ant, Iâ€™m not gonna break out the DNA sequences like â€œOhh well evolutionarily ants are technically waspsâ€. Iâ€™m gonna say yeah, good job, thatâ€™s two animals.

<p>So I promoted bees and ants to siblings of wasps rather than descendants. Now bee, wasp, and ant count as different animals. My animal term hierarchy is thus not phylogenic; phylogeny is just its starting point.

<p>I sorted out other groups, too; for examples, these groups of groups of birds distinguished chiefly by size: crows/ravens, hawks/eagles, ducks/geese/swans. (Ravens are bigger; Eagles are bigger; Geese are bigger and swans are yet bigger.)

<p>My friend <a href=https://devin.gay>Devin</a> argued for a strictly phylogenic hierarchy:

<blockquote id=devinscript>
  <p>evolutionary biologists are professional animal listers
  <p>so they should be the source of truth
  <p>and I think itâ€™s cool to learn that wasps or egrets or stuff are paraphyletic
</blockquote>

<p>Phylogeny can be fun (e.g. <a href=https://metazooa.com/>Metazooa</a>) but that's not the game I wanted to make. Maybe Iâ€™m failing to educate my players about phylogeny, but Iâ€™m learning a lot about phylogeny myself; so it averages out, you see.</p>


<h2 id=performance>Performance</h2>

<p>Initial page load includes the full list of animals; the game avoids network calls to instantly respond to guesses. Initial load is 18MB compressed, 58 MB decompressed. That's about how much outlook.com loads <em>while logged out</em> (19MB compressed, 33MB decompressed) which makes you wonder why a marketing page needs as much information as a list of every animal known to humanity.


<h2 id=visuals>Visuals</h2>

<p>I learned about SVG filters.

<div style=background-image:url(https://rose.systems/animalist/media/tile_ether.svg) class=bgdemo>
    <p>Here's the colorful background that shows up when you exceed 50 points. It's just the raw output of the builtin turbulence filter. I like it.
    <details><summary>The source code is pretty short.</summary>
    <pre>
    &lt;svg width="400" height="400"&gt;
        &lt;filter id="f" x="0" y="0" width="1" height="1"&gt;
            &lt;feTurbulence numOctaves="1" baseFrequency="0.008" stitchTiles="stitch" /&gt;
        &lt;/filter&gt;
        &lt;rect width="400" height="400" filter="url(#f)" /&gt;
    &lt;/svg&gt;
    </pre>
    </details>
</div>

<div style=background-image:url(https://rose.systems/animalist/media/tile_clouds.svg);background-size:90em id=cloudy class=bgdemo>
    <p>These clouds show up if you list enough birds in a row.
    <details><summary>The source code is only a little longer.</summary>
    <pre>
    &lt;svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"&gt;
        &lt;filter id="f" width="1" height="1" x="0" y="0"&gt;
            &lt;feTurbulence numOctaves="5" baseFrequency="0.015" stitchTiles="stitch"
                          width="400" height="400" /&gt;
            &lt;feColorMatrix type="matrix"
                   values="0    0    0    1    0
                           0    0    0    1    0
                           0    0    0    1    0
                           0    -.3  -.7  2    0" /&gt;
        &lt;/filter&gt;
        &lt;rect x="0" y="0" width="400" height="400" style="filter:url(#f)" /&gt;
    &lt;/svg&gt;
    </pre>
</details>
</div>


<h2 id=emoji-summary>Emoji summary</h3>

<p>At game over, you get an emoji summary like this:</p>

<samp style=max-width:40em;display:block;margin:auto;padding:1em;border-style:inset>https://rose.systems/animalist<br>
<br>
144 animals listed<br>

ğŸ¦€ğŸ¦ğŸ¦ğŸ¦ğŸ•ŠğŸ•Šï¸ğŸ¦…ğŸ¦…ğŸ¦ğŸŸğŸ ğŸ¦ˆğŸ¦ğŸ…ğŸ»ğŸ™€ğŸœğŸ›ğŸŒğŸ¦ğŸ¦ğŸ¦â€â¬›ğŸ¦â€â¬›ğŸ¦ğ“†£ğŸªğŸŠğŸ¬ğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸŸğŸ¡ğŸ¦”ğ“‡¼ğŸ•¸ï¸ğŸ¦â€â¬›ğŸ•·ğŸ›ğŸ‹ğŸ³ğŸ‹ğŸ«ğŸ„ğŸ¦ŒğŸºğŸ•ğŸ¦¬ğŸ¦–ğŸ¦•ğŸ’ğŸ¦ğŸ¦¡ğŸ¦¨ğŸ°ğŸ™ğŸŒğŸª±ğŸª°ğŸ›ğŸ¦­ğŸ“ğŸ¦¢ğŸ¦†ğŸŒğŸ›ğŸ³ğŸ†ğ“…£ğ“†‰ğŸ¢ğŸª°ğŸª°ğŸª°ğŸ›ğŸª³ğŸ›ğŸ¦¥ğŸ¦ğŸ›ğŸ›ğŸ
</samp>

<p>Internally I call the emoji â€œmononymsâ€ because they arenâ€™t all emoji. Any single-character alias for an animal is a possible mononym for that animal. (Or any more-specific version of that animal; any bird becomes ğŸ¦, unless a more specific mononym applies, such as ğŸ¦… or ğŸ¦‰.)

<p>Most of these aliases arise from Wikipedia redirects. Wikipedia typically redirects emoji to what they depict, unless the emoji itself is notable<!-- (this is explained at <a href=https://en.wikipedia.org/wiki/WP:REMOJI>WP:REMOJI</a>)-->. For example, <a href=https://en.wikipedia.org/wiki/ğŸ•·>ğŸ•·</a> redirects to <a href=https://en.wikipedia.org/wiki/Spider>Spider</a>. Some mononyms I had to add manually; e.g. <a href=https://en.wikipedia.org/wiki/ğŸ¦–>ğŸ¦–</a> is somehow notable enough for an article.

<p><a href=https://en.wikipedia.org/wiki/ğŸ³>ğŸ³</a> means ounce (as in the unit), but â€œounceâ€ also archaically means <i>snow leopard</i>. This silly indirection is cute enough to leave in.

<details id=ğŸ³><summary>1600s bestiary excerpt: The Ounce</summary>
<div>
<section lang=emodeng>
<p>The Ounce is a moÅ¿t cruel BeaÅ¿t, of the quantity of a village or maÅ¿tiffe Dog, having his face and ears like to a Lions, his body, tail, feet, and nails like a Cats, of a very terrible AÅ¿pect, his teeth Å¿o Å¿trong and Å¿harp, that he can even cut Wood in Å¿under with them; he hath alÅ¿o in his nails Å¿o great Å¿trength, that he only fighteth with them, and uÅ¿eth them for his greateÅ¿t defenceâ€¦</p>
<p>The gall of this BeaÅ¿t is deadly poyÅ¿on, it hateth all creatures, and deÅ¿troyeth them, eÅ¿pecially men; and therefore it may well be Å¿aid to be poÅ¿Å¿eÅ¿Å¿ed with Å¿ome evill Å¿pirit. It loveth none but his own kinde. And thus much for the Ounce.</p>
</section>
<img src=/post_assets/ounce.jpg>
</div>
<p style=text-align:center><cite><a href=https://archive.org/details/historyoffourfoo00tops/page/441/mode/2up>The History of Four-footed BeaÅ¿ts and Serpents, p441-442</a></cite></p>
</details>


<h2 id=remaining-bugs>Remaining bugs</h2>

<p>There are still animals requiring manual intervention. <a href="https://en.wikipedia.org/wiki/Goanna">Goanna</a> for example isn't easily dataminable; it's a normal article with no infobox, and its Wikidata entity lacks a taxon. Maybe I could iterate over every article in every category like â€œReptile common namesâ€ and look for a list of animals under a <i>Species</i> heading, but sometimes it's headed <i>Taxonomy</i> or <i>Classification</i> or <i>Genera</i>, and sometimes it's in paragraph or table form. So these cases are staying manual for the foreseeable future.

<p><a href=/contact>Hit me up</a> with bug reports. Or ideas. Or complaints, or whatever.</p>



